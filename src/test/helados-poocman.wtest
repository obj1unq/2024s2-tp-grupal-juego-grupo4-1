import managers.levelManager.*
import wollok.game.*
import src.personajes.pacman.*
import escenarios.pantallaInicial.*
import managers.posiciones.*
import comidas.helados.*
import escenarios.levels.level1.*
import escenarios.levels.levelPrueba.*
import managers.heladoManager.*
import estados.estado.*


describe "Pacman y los helados" {

    method initialize(){
        game.addVisual(mainScreen)
        levelManager.levelActual(level1)
        mainScreen.iniciarJuego()
    }

    test "pacman come una helado comun en (4,1) y tiene 1000 puntos" {
        const heladoComun = game.getObjectsIn(game.at(4,1))
        assert.equals(0, levelManager.puntuacionLevel())
        pacman.cambioDireccion(derecha)
        pacman.moverse()
        heladoComun.get(0).colisionarConPacman(pacman)
        assert.equals(1000, levelManager.puntuacionLevel())
    }  
    
    
}

describe "Pacman y los helados en el mapa de prueba"{

    method initialize(){
        game.addVisual(mainScreen)
        levelManager.levelActual(levelPrueba)
        mainScreen.iniciarJuego()
    }

    test "pacman comiendo chocolate" {
        const helado = heladoManager.heladoEn(game.at(2,2))
        pacman.moverse()
        helado.colisionarConPacman(pacman)
        assert.equals(superPacman, pacman.estado())

    }
}